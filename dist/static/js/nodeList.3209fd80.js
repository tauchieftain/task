(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["nodeList"],{"6ada":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"page-wrapper common-page"},[t("div",{staticClass:"top-single-title"},[e._v("节点列表")]),t("div",{staticClass:"top-tools"},[t("el-form",{staticClass:"kw-el-form-class",attrs:{inline:!0,size:"small"},on:{submit:function(e){e.preventDefault()}}},[t("el-form-item",{attrs:{label:"节点名称"}},[t("el-input",{attrs:{placeholder:"请输入节点名称"},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v("查询")]),t("el-button",{attrs:{type:"text"},on:{click:e.handleReset}},[e._v("清空")])],1)],1)],1),t("div",{staticClass:"table-tools"},[t("div",[t("el-button",{directives:[{name:"getPermission",rawName:"v-getPermission",value:"config",expression:"'config'"}],attrs:{type:"primary"},on:{click:e.toConfig}},[e._v("配置")]),t("el-button",{directives:[{name:"getPermission",rawName:"v-getPermission",value:"log",expression:"'log'"}],attrs:{type:"primary"},on:{click:e.toLog}},[e._v("日志")])],1),t("div")]),t("div",{staticClass:"page-table-container"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticClass:"kw-table-data",attrs:{data:e.tableData,border:"",size:"small","row-key":"id"}},[t("el-table-column",{attrs:{prop:"id",label:"ID",width:"80px"}}),t("el-table-column",{attrs:{prop:"name",label:"名称"}}),t("el-table-column",{attrs:{prop:"address",label:"地址"}}),t("el-table-column",{attrs:{label:"状态",width:"140px"},scopedSlots:e._u([{key:"default",fn:function({row:a}){return[t("span",{class:1==a.status?"success-color":"error-color"},[e._v(e._s(1==a.status?"可用":"不可用"))])]}}])}),t("el-table-column",{attrs:{prop:"crontab_num",label:"运行的定时任务",width:"200px"}}),t("el-table-column",{attrs:{prop:"audit_crontab_num",label:"待审核的定时任务",width:"200px"}}),t("el-table-column",{attrs:{prop:"fail_crontab_num",label:"执行失败的定时任务",width:"200px"}}),t("el-table-column",{attrs:{prop:"update_time",label:"更新时间",width:"140px"},scopedSlots:e._u([{key:"default",fn:function({row:t}){return[e._v(" "+e._s(e.getComputedDate(t.update_time,!0))+" ")]}}])}),t("el-table-column",{attrs:{label:"操作",width:"140px"},scopedSlots:e._u([{key:"default",fn:function({row:a}){return[t("el-button",{directives:[{name:"getPermission",rawName:"v-getPermission",value:"detail",expression:"'detail'"}],attrs:{type:"primary",disabled:1!=a.status},on:{click:function(t){return e.toDetail(a)}}},[e._v("查看")])]}}])})],1),t("el-pagination",{attrs:{align:"center","current-page":e.currentPage,"page-sizes":[10,20,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])},l=[],i=(a("14d9"),{data(){return{searchForm:{name:""},tableData:[],tableLoading:!1,currentPage:1,pageSize:10,total:0}},mounted(){this.getList()},methods:{handleReset(){this.searchForm={name:""}},handleSearch(){this.currentPage=1,this.getList()},getList(){this.tableLoading=!0,this.$api.node.getNodeList({page:this.currentPage,page_size:this.pageSize,name:this.searchForm.name||void 0}).then(e=>{0==e.code?(this.tableData=e.data.list,this.total=e.data.total):this.$message.error(e.msg)}).finally(()=>{this.tableLoading=!1})},handleSizeChange(e){this.pageSize=e,this.getList()},handleCurrentChange(e){this.currentPage=e,this.getList()},toDetail(e){this.$router.push({path:"/node/crontab",query:{node_id:e.id}})},toConfig(){this.$router.push({path:"/node/config"})},toLog(){this.$router.push({path:"/node/nodeLog"})}}}),n=i,o=a("2877"),r=Object(o["a"])(n,s,l,!1,null,null,null);t["default"]=r.exports}}]);